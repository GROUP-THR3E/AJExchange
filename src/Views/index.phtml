<?php

use GroupThr3e\AJExchange\Models\HomepageData;
use GroupThr3e\AJExchange\Util\Auth;
use GroupThr3e\AJExchange\Util\View;

/**
 * @var View $this
 * @var HomepageData $data
 */

$title = 'index';
?>
<div class="outerDiv home-grid-design p-2 m-3 mx-auto">
    <div class="home-grid-container">
        <div>
            <h1 class="home-main-title">Recent Listings</h1>
            <hr class="filter-separation mt-2 mb-3"/>
            <h5 class="home-image-titles d-inline-block">Sales</h5><h5 class="home-view-more d-inline-block search-link-style"><a href="/listings/search?query=&type=sell">View all sales</a></h5>
            <div class="view-extra-home-images d-flex flex-row gap-3 text-center search-link-style">
                <?php foreach($data->recentSales as $recentSale): ?>
                <div class="home-image-containers">
                    <a href="/listings/<?= $recentSale->getListingId() ?>">
                        <img class="home-images" src="<?= $this->listingImage($recentSale->getImageUrls()[0]) ?>" alt="">
                    </a>
                    <a href="/listings/<?= $recentSale->getListingId() ?>" class="home-image-descriptions-container"><?= htmlspecialchars($recentSale->getListingName()) ?></a>
                </div>
                <?php endforeach; ?>
            </div>
            <hr class="filter-separation mt-2 mb-3"/>
            <h5 class="home-image-titles d-inline-block">Exchanges</h5><h5 class="home-view-more d-inline-block search-link-style"><a href="/listings/search?query=&type=exchange">View all exchanges</a></h5>
            <div class="view-extra-home-images d-flex flex-row gap-3 text-center search-link-style">
                <?php foreach($data->recentExchanges as $recentExchange): ?>
                <div class="home-image-containers">
                    <a href="/listings/<?= $recentExchange->getListingId() ?>">
                        <img class="home-images" src="<?= $this->listingImage($recentExchange->getImageUrls()[0]) ?>" alt="">
                    </a>
                    <a href="/listings/<?= $recentExchange->getListingId() ?>" class="home-image-descriptions-container"><?= htmlspecialchars($recentExchange->getListingName()) ?></a>
                </div>
                <?php endforeach; ?>
            </div>
            <hr class="filter-separation mt-2 mb-3"/>
            <h5 class="home-image-titles d-inline-block">Giveaways</h5><h5 class="home-view-more d-inline-block search-link-style"><a href="/listings/search?query=&type=giveaway">View all giveaways</a></h5>
            <div class="view-extra-home-images d-flex flex-row gap-3 text-center search-link-style">
                <?php foreach($data->recentGiveaways as $recentGiveaway): ?>
                <div class="home-image-containers">
                    <a href="/listings/<?= $recentGiveaway->getListingId() ?>">
                        <img class="home-images" src="<?= $this->listingImage($recentGiveaway->getImageUrls()[0]) ?>" alt="">
                    </a>
                    <a href="/listings/<?= $recentGiveaway->getListingId() ?>" class="home-image-descriptions-container"><?= $recentGiveaway->getListingName() ?></a>
                </div>
                <?php endforeach; ?>
            </div>
            <hr class="filter-separation mt-2 mb-3"/>
        </div>
        <div>
            <div class="py-3 home-grid-design home-logo-misc home-welcome-design">
                <div class="home-logo-container btn-outline-light">
                    <h5 class="home-logo-descriptions"><a class="text-light" href="/listings/search">View all listings</a></h5>
                </div>
                <div class="home-logo-container">
                    <h5 class="home-logo-descriptions"><a class="text-light" href="/users/my/listings">View your listings</a></h5>
                </div>
                <div class="home-logo-container">
                    <h5 class="home-logo-descriptions"><a class="text-light" href="/listings/create">List Item</a></h5>
                </div>
                <?php if(Auth::getAuthManager()->getUser()->getRole() == 'admin'): ?>
                <div class="home-logo-container">
                    <h5 class="home-logo-descriptions"><a class="text-light" href="/listings/adminControls">Admin Controls</a></h5>
                </div>
                <?php endif; ?>
                <div class="home-logo-container">
                    <h5 class="home-logo-descriptions"><a class="text-light" href="/users/my/orders">View your orders</a></h5>
                </div>
            </div>
            <div class="py-2 home-grid-design home-image-misc categories-color">
                <h2 style="color: white" class="home-welcome">Categories</h2>
                <div class="home-welcome list-div text-center">
                    <ul style="list-style-type:none; padding: 0;" class="home-list home-list-design">
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 1</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 2</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 3</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 4</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 5</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 6</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 7</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 8</a></li>
                        <li class="home-list"><a href="javascript:void(0)" class="h4 d-block">Category 9</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>